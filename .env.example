# Anthropic API Configuration
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Supabase Configuration
SUPABASE_URL=your_supabase_project_url_here
SUPABASE_ANON_KEY=your_supabase_anon_key_here

# API Authentication (for batch execution and programmatic access)
API_KEY_SECRET=your-secret-api-key-here

# Onkernel Configuration (Browser Automation)
KERNEL_API_KEY=your_onkernel_api_key_here
# Alternative key name (KERNEL_API_KEY is preferred)
# ONKERNEL_API_KEY=your_onkernel_api_key_here

# Optional: Browser timeout in seconds (default: 180 = 3 minutes)
# OnKernel will automatically delete browser after this duration of no active CDP/live view connection
# Increased from 60s to give more time for agent thinking and API calls during complex tasks
ONKERNEL_TIMEOUT_SECONDS=180

# Optional: Enable browser profiles for authentication persistence (requires startup/enterprise plan)
# Profiles save cookies/auth state across different browser sessions
ONKERNEL_USE_PROFILES=false

# Optional: Enable browser persistence for session lifecycle management (default: false)
# When enabled, browsers enter zero-cost standby mode during idle periods (4 seconds)
# and can be reused within the same chat session after CDP reconnections
# Browser is explicitly destroyed when chat session completes
# Benefits: cost savings (zero charges in standby), resilient to network issues, state preservation
BROWSER_PERSISTENCE=false

# Optional: Typing delay in milliseconds (default: 5ms, use 0 for instant typing)
# Lower values = faster typing, higher values = more human-like behavior
TYPING_DELAY_MS=5

# Optional: Delay between agent sampling loop iterations in milliseconds (default: 100ms)
# Lower values = faster agent execution, higher values = more time for page loads
SAMPLING_LOOP_DELAY_MS=100

# Optional: Maximum number of screenshots to keep as base64 in API context (default: 3)
# Older screenshots are converted to URL references to reduce payload size
# Lower values = smaller payloads and faster API responses, but less visual context
MAX_BASE64_SCREENSHOTS=3

# Optional: Number of recent thinking blocks to keep in context (default: 1)
# Older thinking blocks are removed to reduce token usage and improve performance
# Set to 0 to remove all thinking blocks, higher values preserve more reasoning history
KEEP_RECENT_THINKING_BLOCKS=1

# Optional: Anthropic thinking budget in tokens (default: 1024, minimum: 1024)
# Controls how many tokens Claude can use for internal reasoning
# Higher values enable deeper reasoning but may increase latency
# Recommended: 1024-4096 for most tasks, 16k+ for complex reasoning
THINKING_BUDGET_TOKENS=1024

# Optional: Store full Anthropic payload in database (default: no)
# WARNING: Setting to 'yes' significantly increases database storage (includes base64 images)
# Use 'yes' for debugging, 'no' for production (sanitized version stored)
FULL_ANTHROPIC_PAYLOAD=no

# Optional: Enable Anthropic prompt caching (default: yes)
# Caches static content (system prompt, tool definitions, older messages)
# Benefits: 90% cost reduction, 85% latency reduction on cached content
# Disable only if experiencing caching issues
ENABLE_PROMPT_CACHING=yes

# Optional: Enable Anthropic context management beta (default: yes)
# Automatically cleans up old tool results when context window grows
# Benefits: 84% token reduction, 29-39% performance boost in long conversations
# Uses clear_tool_uses_20250919 strategy with configurable thresholds
ENABLE_CONTEXT_MANAGEMENT=yes

# Optional: Context cleanup trigger threshold (default: 30000 tokens)
# Anthropic will start cleaning up old tool uses when input tokens exceed this value
# Lower values = more aggressive cleanup, higher values = more context retained
# Recommended: 30000-50000 for most use cases
CONTEXT_TRIGGER_TOKENS=30000

# Optional: Number of recent tool uses to keep (default: 5)
# How many recent tool executions to preserve during cleanup
# Higher values = more context history, lower values = more aggressive cleanup
# Recommended: 3-10 depending on task complexity
CONTEXT_KEEP_TOOL_USES=5

# Optional: Minimum tokens to clear per cleanup (default: 5000)
# Ensures cleanup is meaningful and not too frequent
# Higher values = fewer but larger cleanups, lower values = more frequent smaller cleanups
# Recommended: 5000-10000
CONTEXT_CLEAR_MIN_TOKENS=5000

# Optional: Tools to exclude from cleanup (comma-separated, default: report_task_status)
# These tool uses will never be removed during context management
# Useful for preserving important tool results (e.g., task status reports)
# Example: "report_task_status,critical_tool_name"
CONTEXT_EXCLUDE_TOOLS=report_task_status

# Browserbase Configuration (replaces Scrapybara)
BROWSERBASE_API_KEY=your_browserbase_api_key_here
BROWSERBASE_PROJECT_ID=your_browserbase_project_id_here

# Optional: Browserbase Context ID for saved authentication state
# Create a context after first login, then use it for future sessions
BROWSERBASE_CONTEXT_ID=

# Optional: Session timeout in seconds (60-21600, default: 3600 = 1 hour)
BROWSERBASE_TIMEOUT_SECONDS=3600

# Next.js Configuration
NEXTAUTH_SECRET=your_nextauth_secret_here
NEXTAUTH_URL=http://localhost:3000

# Public app URL for webhook redirects (update for production deployment)
NEXT_PUBLIC_APP_URL=http://localhost:3000
